<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3751px" preserveAspectRatio="none" style="width:1581px;height:3751px;background:#FFFFFF;" version="1.1" viewBox="0 0 1581 3751" width="1581px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="39.4434" id="_title" style="stroke:none;stroke-width:1.0;" width="97" x="738" y="10"/><text fill="#FF0000" font-family="sans-serif" font-size="25" font-weight="bold" lengthAdjust="spacing" textLength="87" x="743" y="39.1699">VC 발급</text><rect fill="#F0F8FF" height="3689.3789" style="stroke:#181818;stroke-width:0.5;" width="452" x="245" y="56.4434"/><rect fill="#DDDDDD" height="3689.3789" style="stroke:#181818;stroke-width:0.5;" width="263" x="782" y="56.4434"/><rect fill="#DDDDDD" height="3689.3789" style="stroke:#181818;stroke-width:0.5;" width="335" x="1067" y="56.4434"/><rect fill="#FFFFFF" height="3433.4707" style="stroke:#181818;stroke-width:1.0;" width="10" x="306" y="223.8633"/><rect fill="#FFFFFF" height="112.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="497" y="1759.3223"/><rect fill="#FFFFFF" height="133.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="628.5" y="957.627"/><rect fill="#FFFFFF" height="1516.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="628.5" y="2055.7383"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="334.416"/><rect fill="#FFFFFF" height="48.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="812.0742"/><rect fill="#FFFFFF" height="112.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="1158.8008"/><rect fill="#FFFFFF" height="317.416" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="1379.9746"/><rect fill="#FFFFFF" height="793.1426" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="2344.2227"/><rect fill="#FFFFFF" height="70.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="3430.1602"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="3619.0234"/><rect fill="#FFFFFF" height="228.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="1424.5957"/><rect fill="#FFFFFF" height="689.2109" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="2418.8438"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="3459.4707"/><rect fill="#FFFFFF" height="138.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1337" y="1469.2168"/><rect fill="#FFFFFF" height="588.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="1337" y="2448.1543"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="1188.1113"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="1788.6328"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="2519.7754"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="3226.2969"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="336" x="47" y="148.9316"/><rect fill="none" height="65.9316" style="stroke:#000000;stroke-width:1.5;" width="667" x="243" y="378.7266"/><rect fill="none" height="50.6211" style="stroke:#000000;stroke-width:1.5;" width="459" x="242" y="537.2793"/><rect fill="none" height="52.6211" style="stroke:#000000;stroke-width:1.5;" width="427" x="120" y="601.9004"/><rect fill="none" height="50.6211" style="stroke:#000000;stroke-width:1.5;" width="667" x="243" y="668.5215"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="116" x2="116" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="311" x2="311" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="502" x2="502" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="633" x2="633" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="843" x2="843" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="983" x2="983" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1127" x2="1127" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1342" x2="1342" y1="131.9316" y2="3666.334"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1528" x2="1528" y1="131.9316" y2="3666.334"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="128.9785">사용자</text><ellipse cx="26" cy="63.9434" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,71.9434 L26,98.9434 M13,79.9434 L39,79.9434 M26,98.9434 L13,113.9434 M26,98.9434 L39,113.9434 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="3678.8691">사용자</text><ellipse cx="26" cy="3690.3223" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,3698.3223 L26,3725.3223 M13,3706.3223 L39,3706.3223 M26,3725.3223 L13,3740.3223 M26,3725.3223 L39,3740.3223 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="67" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="77" y="104.4902">«목록 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="74" y="120.9785">목록관리서비스</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="67" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="77" y="3685.8691">«목록 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="74" y="3702.3574">목록관리서비스</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="259" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="90" x="266" y="104.4902">«인가앱 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="293" y="120.9785">인가앱</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="259" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="90" x="266" y="3685.8691">«인가앱 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="293" y="3702.3574">인가앱</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="450" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="90" x="457" y="104.4902">«인가앱 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="468.5" y="120.9785">인가앱 SDK</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="450" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="90" x="457" y="3685.8691">«인가앱 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="468.5" y="3702.3574">인가앱 SDK</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="584" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="594.5" y="104.4902">«월렛 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="591" y="120.9785">mWallet SDK</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="584" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="594.5" y="3685.8691">«월렛 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="591" y="3702.3574">mWallet SDK</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="796" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="803" y="104.4902">«TAS 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="830" y="120.9785">TAS</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="796" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="803" y="3685.8691">«TAS 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="830" y="3702.3574">TAS</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="936" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="943" y="104.4902">«TAS 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="970" y="120.9785">SDK</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="936" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="943" y="3685.8691">«TAS 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="970" y="3702.3574">SDK</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="1081" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="1088" y="104.4902">«발급 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1106.5" y="120.9785">Issuer</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="1081" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="1088" y="3685.8691">«발급 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1106.5" y="3702.3574">Issuer</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="1296" y="83.9551"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="1303" y="104.4902">«발급 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1306" y="120.9785">Issuer SDK</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="1296" y="3665.334"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="1303" y="3685.8691">«발급 사업자»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1306" y="3702.3574">Issuer SDK</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="1487" y="128.9785">BlockChain</text><path d="M1510,79.4434 C1510,69.4434 1528,69.4434 1528,69.4434 C1528,69.4434 1546,69.4434 1546,79.4434 L1546,105.4434 C1546,115.4434 1528,115.4434 1528,115.4434 C1528,115.4434 1510,115.4434 1510,105.4434 L1510,79.4434 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1510,79.4434 C1510,89.4434 1528,89.4434 1528,89.4434 C1528,89.4434 1546,89.4434 1546,79.4434 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="1487" y="3678.8691">BlockChain</text><path d="M1510,3691.8223 C1510,3681.8223 1528,3681.8223 1528,3681.8223 C1528,3681.8223 1546,3681.8223 1546,3691.8223 L1546,3717.8223 C1546,3727.8223 1528,3727.8223 1528,3727.8223 C1528,3727.8223 1510,3727.8223 1510,3717.8223 L1510,3691.8223 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1510,3691.8223 C1510,3701.8223 1528,3701.8223 1528,3701.8223 C1528,3701.8223 1546,3701.8223 1546,3691.8223 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="3433.4707" style="stroke:#181818;stroke-width:1.0;" width="10" x="306" y="223.8633"/><rect fill="#FFFFFF" height="112.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="497" y="1759.3223"/><rect fill="#FFFFFF" height="133.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="628.5" y="957.627"/><rect fill="#FFFFFF" height="1516.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="628.5" y="2055.7383"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="334.416"/><rect fill="#FFFFFF" height="48.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="812.0742"/><rect fill="#FFFFFF" height="112.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="1158.8008"/><rect fill="#FFFFFF" height="317.416" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="1379.9746"/><rect fill="#FFFFFF" height="793.1426" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="2344.2227"/><rect fill="#FFFFFF" height="70.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="3430.1602"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="838.5" y="3619.0234"/><rect fill="#FFFFFF" height="228.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="1424.5957"/><rect fill="#FFFFFF" height="689.2109" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="2418.8438"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="3459.4707"/><rect fill="#FFFFFF" height="138.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1337" y="1469.2168"/><rect fill="#FFFFFF" height="588.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="1337" y="2448.1543"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="1188.1113"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="1788.6328"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="2519.7754"/><rect fill="#FFFFFF" height="12" style="stroke:#181818;stroke-width:1.0;" width="10" x="1523" y="3226.2969"/><path d="M47,148.9316 L177,148.9316 L177,156.2422 L167,166.2422 L47,166.2422 L47,148.9316 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="336" x="47" y="148.9316"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="85" x="62" y="162.5">목록 사업자 기능</text><polygon fill="#181818" points="127,183.5527,117,187.5527,127,191.5527,123,187.5527" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="299,183.5527,309,187.5527,299,191.5527,303,187.5527" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="121" x2="305" y1="187.5527" y2="187.5527"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="133" y="182.8105">(1)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="156" y="182.8105">발급 가능 모바일 신분증 조회</text><polygon fill="#181818" points="294,219.8633,304,223.8633,294,227.8633,298,223.8633" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="26" x2="300" y1="223.8633" y2="223.8633"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="33" y="219.1211">(2)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="56" y="219.1211">모바일 신분증 발급 요청</text><path d="M31,236.8633 L31,307.8633 L407,307.8633 L407,246.8633 L397,236.8633 L31,236.8633 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M397,236.8633 L397,246.8633 L407,246.8633 L397,236.8633 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="355" x="37" y="254.4316">사용자 DID Doc 등록 이후에 VC 발급까지 하나의 과정으로 수행되면</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="37" y="269.7422">"purpose : DID Doc 등록 + VC 발급"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="37" y="285.0527">으로 수행하며 아래 토큰발급 과정은 생략함</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="37" y="300.3633">(P130_user_regist 참고)</text><polygon fill="#181818" points="826.5,330.416,836.5,334.416,826.5,338.416,830.5,334.416" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="832.5" y1="334.416" y2="334.416"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="323" y="329.6738">(3)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="346" y="329.6738">VC 발급 개시 요청</text><polygon fill="#181818" points="327,342.416,317,346.416,327,350.416,323,346.416" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="842.5" y1="346.416" y2="346.416"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="333" y="359.9844">(4)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="356" y="359.9844">결과</text><path d="M243,378.7266 L358,378.7266 L358,386.0371 L348,396.0371 L243,396.0371 L243,378.7266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="65.9316" style="stroke:#000000;stroke-width:1.5;" width="667" x="243" y="378.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70" x="258" y="392.2949">보안세션 설립</text><polygon fill="#8FBC8F" points="263,401.0371,890,401.0371,900,420.0371,890,439.0371,263,439.0371,253,420.0371,263,401.0371" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="483.5" y="417.6055">P150_security_session_zeroTrust</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="459.5" y="432.916">(이 과정에서 인가앱과 TAS간 보안세션 설립)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1574" x="0" y="472.3135"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="472.3135" y2="472.3135"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="475.3135" y2="475.3135"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="62" x="756" y="461.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="762" y="478.2266">토큰발급</text><path d="M321,499.9688 L321,524.9688 L649,524.9688 L649,509.9688 L639,499.9688 L321,499.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M639,499.9688 L639,509.9688 L649,509.9688 L639,499.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307" x="327" y="517.5371">서버토큰 발급 과정은 키교환을 통하여 생성한 대칭키를 이용.</text><path d="M242,537.2793 L609,537.2793 L609,544.5898 L599,554.5898 L242,554.5898 L242,537.2793 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="50.6211" style="stroke:#000000;stroke-width:1.5;" width="459" x="242" y="537.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="322" x="257" y="550.8477">월렛토큰 발급 (DID Doc 등록 과정 수행이후면 발급과정 생략)</text><polygon fill="#8FBC8F" points="262,559.5898,681,559.5898,691,570.5898,681,582.5898,262,582.5898,252,570.5898,262,559.5898" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309" x="317" y="576.1582">P140_3_issue_walletToken 참고 (purpose : VC발급)</text><path d="M120,601.9004 L542,601.9004 L542,609.2109 L532,619.2109 L120,619.2109 L120,601.9004 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="52.6211" style="stroke:#000000;stroke-width:1.5;" width="427" x="120" y="601.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="377" x="135" y="615.4688">서버토큰요청데이터 전달 (DID Doc 등록 과정 수행이후면 발급과정 생략)</text><path d="M130,624.2109 L130,649.2109 L491,649.2109 L491,634.2109 L481,624.2109 L130,624.2109 " fill="#8FBC8F" style="stroke:#181818;stroke-width:0.5;"/><path d="M481,624.2109 L481,634.2109 L491,634.2109 L481,624.2109 " fill="#8FBC8F" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340" x="136" y="641.7793">P140_1_make_serverTokenData 참고 (purpose : VC발급)</text><path d="M243,668.5215 L610,668.5215 L610,675.832 L600,685.832 L243,685.832 L243,668.5215 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="50.6211" style="stroke:#000000;stroke-width:1.5;" width="667" x="243" y="668.5215"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="322" x="258" y="682.0898">서버토큰 발급 (DID Doc 등록 과정 수행이후면 발급과정 생략)</text><polygon fill="#8FBC8F" points="263,690.832,890,690.832,900,701.832,890,713.832,263,713.832,253,701.832,263,690.832" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="421.5" y="707.4004">P140_2_issue_serverToken 참고 (purpose : VC발급)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1574" x="0" y="746.7979"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="746.7979" y2="746.7979"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="749.7979" y2="749.7979"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="138" x="718" y="736.1426"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="724" y="752.7109">DID Auth 단방향인증</text><polygon fill="#181818" points="826.5,808.0742,836.5,812.0742,826.5,816.0742,830.5,812.0742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="832.5" y1="812.0742" y2="812.0742"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="323" y="796.6768">(5)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="346" y="786.0215">VC 발급 시작 (token</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="459" y="789.6543">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="477" y="786.0215">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="346" y="804.332">ID</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="30" x="360" y="807.9648">wallet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="390" y="804.332">)</text><rect fill="#FEFFDD" height="26" style="stroke:#181818;stroke-width:0.5;" width="88" x="799" y="825.0742"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="803" y="841.6426">token</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="839" y="845.2754">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="861" y="841.6426">검증</text><polygon fill="#181818" points="327,856.3848,317,860.3848,327,864.3848,323,860.3848" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="842.5" y1="860.3848" y2="860.3848"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="333" y="875.4531">(6)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="356" y="873.9531">nonce</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="394" y="877.5859">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="416" y="873.9531">전달</text><polygon fill="#181818" points="294,906.0059,304,910.0059,294,914.0059,298,910.0059" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="26" x2="300" y1="910.0059" y2="910.0059"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="33" y="905.2637">(7)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="56" y="905.2637">사용자인증</text><polygon fill="#181818" points="616.5,953.627,626.5,957.627,616.5,961.627,620.5,957.627" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="622.5" y1="957.627" y2="957.627"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="323" y="943.7295">(8)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="346" y="934.5742">DID Auth data 생성 요청</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="346" y="949.8848">(token</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="30" x="386" y="953.5176">wallet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="416" y="949.8848">, nonce</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="15" x="462" y="953.5176">tas</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="477" y="949.8848">)</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="1005.248" y2="1005.248"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="1005.248" y2="1018.248"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="1018.248" y2="1018.248"/><polygon fill="#181818" points="649.5,1014.248,639.5,1018.248,649.5,1022.248,645.5,1018.248" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="645.5" y="991.3506">(9)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="668.5" y="982.1953">DID Auth data(nonce</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="799.5" y="985.8281">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="817.5" y="982.1953">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="668.5" y="1000.5059">생성</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="1065.8691" y2="1065.8691"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="1065.8691" y2="1078.8691"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="1078.8691" y2="1078.8691"/><polygon fill="#181818" points="649.5,1074.8691,639.5,1078.8691,649.5,1082.8691,645.5,1078.8691" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="1051.9717">(10)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="677.5" y="1042.8164">DID Auth data(nonce</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="808.5" y="1046.4492">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="826.5" y="1042.8164">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="677.5" y="1061.127">holder 서명</text><polygon fill="#181818" points="327,1086.8691,317,1090.8691,327,1094.8691,323,1090.8691" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="632.5" y1="1090.8691" y2="1090.8691"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="333" y="1113.5928">(11)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="365" y="1104.4375">DID Auth data(nonce</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="496" y="1108.0703">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="514" y="1104.4375">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="365" y="1122.748">전달</text><polygon fill="#181818" points="826.5,1154.8008,836.5,1158.8008,826.5,1162.8008,830.5,1158.8008" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="832.5" y1="1158.8008" y2="1158.8008"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="323" y="1152.5586">(12)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="355" y="1151.0586">DID Auth 요청 (nonce</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="485" y="1154.6914">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="503" y="1151.0586">)</text><polygon fill="#181818" points="1511,1184.1113,1521,1188.1113,1511,1192.1113,1515,1188.1113" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="848.5" x2="1517" y1="1188.1113" y2="1188.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="855.5" y="1183.3691">(13)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="887.5" y="1183.3691">Holder DIDDoc 조회</text><polygon fill="#181818" points="859.5,1196.1113,849.5,1200.1113,859.5,1204.1113,855.5,1200.1113" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="853.5" x2="1527" y1="1200.1113" y2="1200.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="865.5" y="1213.6797">(14)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="897.5" y="1213.6797">결과</text><line style="stroke:#181818;stroke-width:1.0;" x1="848.5" x2="890.5" y1="1246.7324" y2="1246.7324"/><line style="stroke:#181818;stroke-width:1.0;" x1="890.5" x2="890.5" y1="1246.7324" y2="1259.7324"/><line style="stroke:#181818;stroke-width:1.0;" x1="849.5" x2="890.5" y1="1259.7324" y2="1259.7324"/><polygon fill="#181818" points="859.5,1255.7324,849.5,1259.7324,859.5,1263.7324,855.5,1259.7324" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="855.5" y="1241.9902">(15)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="887.5" y="1241.9902">DID Auth 검증</text><polygon fill="#181818" points="327,1267.7324,317,1271.7324,327,1275.7324,323,1271.7324" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="842.5" y1="1271.7324" y2="1271.7324"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="333" y="1285.3008">(16)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="365" y="1285.3008">DID Auth 검증 결과</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1574" x="0" y="1317.6982"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="1317.6982" y2="1317.6982"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="1320.6982" y2="1320.6982"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="128" x="723" y="1307.043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="729" y="1323.6113">Profile 요청 및 검증</text><polygon fill="#181818" points="826.5,1375.9746,836.5,1379.9746,826.5,1383.9746,830.5,1379.9746" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="832.5" y1="1379.9746" y2="1379.9746"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="323" y="1366.0771">(17)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="355" y="1356.9219">Issue Profile 생성 요청</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="355" y="1372.2324">(token</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="18" x="395" y="1375.8652">TAS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="413" y="1372.2324">)</text><polygon fill="#181818" points="1110,1420.5957,1120,1424.5957,1110,1428.5957,1114,1424.5957" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="848.5" x2="1116" y1="1424.5957" y2="1424.5957"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="855.5" y="1412.1982">(18)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="887.5" y="1404.543">Issue Profile 생성 요청</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="887.5" y="1419.8535">(개인정보)</text><polygon fill="#181818" points="1325,1465.2168,1335,1469.2168,1325,1473.2168,1329,1469.2168" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1132" x2="1331" y1="1469.2168" y2="1469.2168"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1139" y="1456.8193">(19)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="1171" y="1449.1641">Issue Profile 생성 및 서명</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="1171" y="1464.4746">요청</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="1498.5273" y2="1498.5273"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="1498.5273" y2="1511.5273"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="1511.5273" y2="1511.5273"/><polygon fill="#181818" points="1358,1507.5273,1348,1511.5273,1358,1515.5273,1354,1511.5273" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="1493.7852">(20)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="1386" y="1493.7852">Issue Profile 생성</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="1540.8379" y2="1540.8379"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="1540.8379" y2="1553.8379"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="1553.8379" y2="1553.8379"/><polygon fill="#181818" points="1358,1549.8379,1348,1553.8379,1358,1557.8379,1354,1553.8379" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="1536.0957">(21)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="1386" y="1536.0957">Issue Profile 서명</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="1583.1484" y2="1583.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="1583.1484" y2="1596.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="1596.1484" y2="1596.1484"/><polygon fill="#181818" points="1358,1592.1484,1348,1596.1484,1358,1600.1484,1354,1596.1484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="1578.4063">(22)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="1386" y="1578.4063">Issuer 임시키쌍생성</text><polygon fill="#181818" points="1143,1604.1484,1133,1608.1484,1143,1612.1484,1139,1608.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137" x2="1341" y1="1608.1484" y2="1608.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1149" y="1629.3721">(23)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1181" y="1621.7168">Issue Profile 전달 (issuer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="1181" y="1637.0273">공개키정보)</text><polygon fill="#181818" points="859.5,1648.7695,849.5,1652.7695,859.5,1656.7695,855.5,1652.7695" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="853.5" x2="1126" y1="1652.7695" y2="1652.7695"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="865.5" y="1673.9932">(24)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="897.5" y="1666.3379">Issue Profile 전달 (issuer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="897.5" y="1681.6484">공개키정보)</text><polygon fill="#181818" points="327,1693.3906,317,1697.3906,327,1701.3906,323,1697.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="321" x2="842.5" y1="1697.3906" y2="1697.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="333" y="1718.6143">(25)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="365" y="1710.959">Issue Profile 전달</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="365" y="1726.2695">(issuer 공개키정보)</text><polygon fill="#181818" points="485,1755.3223,495,1759.3223,485,1763.3223,489,1759.3223" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="491" y1="1759.3223" y2="1759.3223"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="323" y="1754.5801">(26)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="355" y="1754.5801">Issuer Profile 검증요청</text><polygon fill="#181818" points="1511,1784.6328,1521,1788.6328,1511,1792.6328,1515,1788.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="1517" y1="1788.6328" y2="1788.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="514" y="1783.8906">(27)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="546" y="1783.8906">Issuer DIDDoc 조회</text><polygon fill="#181818" points="518,1796.6328,508,1800.6328,518,1804.6328,514,1800.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="512" x2="1527" y1="1800.6328" y2="1800.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="524" y="1814.2012">(28)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="556" y="1814.2012">결과</text><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="549" y1="1847.2539" y2="1847.2539"/><line style="stroke:#181818;stroke-width:1.0;" x1="549" x2="549" y1="1847.2539" y2="1860.2539"/><line style="stroke:#181818;stroke-width:1.0;" x1="508" x2="549" y1="1860.2539" y2="1860.2539"/><polygon fill="#181818" points="518,1856.2539,508,1860.2539,518,1864.2539,514,1860.2539" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="514" y="1842.5117">(29)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="546" y="1842.5117">Profile 검증</text><polygon fill="#181818" points="327,1868.2539,317,1872.2539,327,1876.2539,323,1872.2539" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="501" y1="1872.2539" y2="1872.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="333" y="1885.8223">(30)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="365" y="1885.8223">검증결과</text><polygon fill="#181818" points="37,1930.1855,27,1934.1855,37,1938.1855,33,1934.1855" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="294,1930.1855,304,1934.1855,294,1938.1855,298,1934.1855" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="300" y1="1934.1855" y2="1934.1855"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="43" y="1921.7881">(31)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="75" y="1914.1328">사용자 화면에 정보 출력 및</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="75" y="1929.4434">확인</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1574" x="0" y="1962.8408"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="1962.8408" y2="1962.8408"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1574" y1="1965.8408" y2="1965.8408"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="129" x="722.5" y="1952.1855"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111" x="728.5" y="1968.7539">VC 발급 요청 및 검증</text><polygon fill="#181818" points="616.5,2051.7383,626.5,2055.7383,616.5,2059.7383,620.5,2055.7383" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="622.5" y1="2055.7383" y2="2055.7383"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="323" y="2026.5303">(32)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="355" y="2002.0645">RequestVC 생성 및 서명</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="355" y="2017.375">요청</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="355" y="2032.6855">(token</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="30" x="395" y="2036.3184">wallet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="425" y="2032.6855">, id</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="14" x="445" y="2036.3184">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="459" y="2032.6855">, issue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="355" y="2050.9961">Profile)</text><rect fill="#FEFFDD" height="26" style="stroke:#181818;stroke-width:0.5;" width="100" x="583" y="2068.7383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="587" y="2085.3066">token</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="30" x="623" y="2088.9395">wallet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="657" y="2085.3066">검증</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="2121.3594" y2="2121.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="2121.3594" y2="2134.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="2134.3594" y2="2134.3594"/><polygon fill="#181818" points="649.5,2130.3594,639.5,2134.3594,649.5,2138.3594,645.5,2134.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="2116.6172">(33)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="677.5" y="2116.6172">RequestVC 생성</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="2163.6699" y2="2163.6699"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="2163.6699" y2="2176.6699"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="2176.6699" y2="2176.6699"/><polygon fill="#181818" points="649.5,2172.6699,639.5,2176.6699,649.5,2180.6699,645.5,2176.6699" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="2158.9277">(34)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="677.5" y="2158.9277">RequestVC 서명</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="2205.9805" y2="2205.9805"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="2205.9805" y2="2218.9805"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="2218.9805" y2="2218.9805"/><polygon fill="#181818" points="649.5,2214.9805,639.5,2218.9805,649.5,2222.9805,645.5,2218.9805" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="2201.2383">(35)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="677.5" y="2201.2383">임시키쌍생성</text><path d="M643,2231.9805 L643,2256.9805 L808,2256.9805 L808,2241.9805 L798,2231.9805 L643,2231.9805 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M798,2231.9805 L798,2241.9805 L808,2241.9805 L798,2231.9805 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="649" y="2249.5488">임시키쌍을 통한 비밀키생성.</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="2283.6016" y2="2283.6016"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="2283.6016" y2="2296.6016"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="2296.6016" y2="2296.6016"/><polygon fill="#181818" points="649.5,2292.6016,639.5,2296.6016,649.5,2300.6016,645.5,2296.6016" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="2278.8594">(36)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="677.5" y="2278.8594">RequestVC 엄호화</text><polygon fill="#181818" points="826.5,2340.2227,836.5,2344.2227,826.5,2348.2227,830.5,2344.2227" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="832.5" y1="2344.2227" y2="2344.2227"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="2330.3252">(37)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="677.5" y="2321.1699">VC 발급 요청(RequestVC,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="677.5" y="2336.4805">id</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="14" x="689.5" y="2340.1133">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="703.5" y="2336.4805">)</text><line style="stroke:#181818;stroke-width:1.0;" x1="848.5" x2="890.5" y1="2376.5332" y2="2376.5332"/><line style="stroke:#181818;stroke-width:1.0;" x1="890.5" x2="890.5" y1="2376.5332" y2="2389.5332"/><line style="stroke:#181818;stroke-width:1.0;" x1="849.5" x2="890.5" y1="2389.5332" y2="2389.5332"/><polygon fill="#181818" points="859.5,2385.5332,849.5,2389.5332,859.5,2393.5332,855.5,2389.5332" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="855.5" y="2370.291">(38)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="887.5" y="2368.791">id</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="14" x="899.5" y="2372.4238">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="917.5" y="2368.791">검증</text><polygon fill="#181818" points="1110,2414.8438,1120,2418.8438,1110,2422.8438,1114,2418.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="848.5" x2="1116" y1="2418.8438" y2="2418.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="855.5" y="2414.1016">(39)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="887.5" y="2414.1016">VC 발급 요청(RequestVC)</text><polygon fill="#181818" points="1325,2444.1543,1335,2448.1543,1325,2452.1543,1329,2448.1543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1132" x2="1331" y1="2448.1543" y2="2448.1543"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1139" y="2443.4121">(40)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1171" y="2443.4121">Request VC 검증 요청</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="2477.4648" y2="2477.4648"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="2477.4648" y2="2490.4648"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="2490.4648" y2="2490.4648"/><polygon fill="#181818" points="1357,2473.4648,1347,2477.4648,1357,2481.4648,1353,2477.4648" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1358,2486.4648,1348,2490.4648,1358,2494.4648,1354,2490.4648" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="2472.7227">(41)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="1386" y="2472.7227">Request VC 복호화</text><polygon fill="#181818" points="1511,2515.7754,1521,2519.7754,1511,2523.7754,1515,2519.7754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1517" y1="2519.7754" y2="2519.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="2515.0332">(42)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="1386" y="2515.0332">Holder DID Doc 조회</text><polygon fill="#181818" points="1358,2527.7754,1348,2531.7754,1358,2535.7754,1354,2531.7754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1352" x2="1527" y1="2531.7754" y2="2531.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1364" y="2545.3438">(43)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="1396" y="2545.3438">결과</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="2578.3965" y2="2578.3965"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="2578.3965" y2="2591.3965"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="2591.3965" y2="2591.3965"/><polygon fill="#181818" points="1357,2574.3965,1347,2578.3965,1357,2582.3965,1353,2578.3965" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1358,2587.3965,1348,2591.3965,1358,2595.3965,1354,2591.3965" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="2573.6543">(44)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1386" y="2573.6543">Request VC 검증</text><polygon fill="#181818" points="1143,2599.3965,1133,2603.3965,1143,2607.3965,1139,2603.3965" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1137" x2="1336" y1="2603.3965" y2="2603.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1149" y="2616.9648">(45)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="1181" y="2616.9648">결과</text><polygon fill="#181818" points="1325,2646.0176,1335,2650.0176,1325,2654.0176,1329,2650.0176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1132" x2="1331" y1="2650.0176" y2="2650.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1139" y="2645.2754">(46)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1171" y="2645.2754">VC 생성 요청</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="2679.3281" y2="2679.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="2679.3281" y2="2692.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="2692.3281" y2="2692.3281"/><polygon fill="#181818" points="1358,2688.3281,1348,2692.3281,1358,2696.3281,1354,2692.3281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="2674.5859">(47)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="1386" y="2674.5859">VC 생성</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="2721.6387" y2="2721.6387"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="2721.6387" y2="2734.6387"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="2734.6387" y2="2734.6387"/><polygon fill="#181818" points="1358,2730.6387,1348,2734.6387,1358,2738.6387,1354,2734.6387" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="2716.8965">(48)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="1386" y="2716.8965">VC 서명</text><polygon fill="#181818" points="1143,2742.6387,1133,2746.6387,1143,2750.6387,1139,2746.6387" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1137" x2="1336" y1="2746.6387" y2="2746.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1149" y="2760.207">(49)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="1181" y="2760.207">결과</text><polygon fill="#181818" points="1325,2789.2598,1335,2793.2598,1325,2797.2598,1329,2793.2598" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1132" x2="1331" y1="2793.2598" y2="2793.2598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1139" y="2788.5176">(50)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="1171" y="2788.5176">VC 메타데이터 등록 요청</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="2822.5703" y2="2822.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="2822.5703" y2="2835.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="2835.5703" y2="2835.5703"/><polygon fill="#181818" points="1358,2831.5703,1348,2835.5703,1358,2839.5703,1354,2835.5703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="2817.8281">(51)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="1386" y="2817.8281">메타데이터 생성</text><polygon fill="#181818" points="1143,2843.5703,1133,2847.5703,1143,2851.5703,1139,2847.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137" x2="1336" y1="2847.5703" y2="2847.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1149" y="2861.1387">(52)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="1181" y="2861.1387">vcMeta</text><polygon fill="#181818" points="1325,2890.1914,1335,2894.1914,1325,2898.1914,1329,2894.1914" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1132" x2="1331" y1="2894.1914" y2="2894.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1139" y="2889.4492">(53)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="1171" y="2889.4492">VC 메타데이터 서명 요청</text><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1389" y1="2923.502" y2="2923.502"/><line style="stroke:#181818;stroke-width:1.0;" x1="1389" x2="1389" y1="2923.502" y2="2936.502"/><line style="stroke:#181818;stroke-width:1.0;" x1="1348" x2="1389" y1="2936.502" y2="2936.502"/><polygon fill="#181818" points="1358,2932.502,1348,2936.502,1358,2940.502,1354,2936.502" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1354" y="2918.7598">(54)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="1386" y="2918.7598">메타데이터 서명</text><polygon fill="#181818" points="1143,2944.502,1133,2948.502,1143,2952.502,1139,2948.502" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137" x2="1336" y1="2948.502" y2="2948.502"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1149" y="2962.0703">(55)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1181" y="2962.0703">signed_vcMeta</text><polygon fill="#181818" points="1325,2991.123,1335,2995.123,1325,2999.123,1329,2995.123" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1132" x2="1331" y1="2995.123" y2="2995.123"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1139" y="2990.3809">(56)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="1171" y="2990.3809">VC 매타데이터 등록 요청</text><polygon fill="#181818" points="1358,3020.4336,1348,3024.4336,1358,3028.4336,1354,3024.4336" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1516,3020.4336,1526,3024.4336,1516,3028.4336,1520,3024.4336" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1352" x2="1522" y1="3024.4336" y2="3024.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1364" y="3019.6914">(57)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1396" y="3019.6914">VC 메타데이터 등록</text><polygon fill="#181818" points="1143,3032.4336,1133,3036.4336,1143,3040.4336,1139,3036.4336" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1137" x2="1341" y1="3036.4336" y2="3036.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1149" y="3050.002">(58)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="1181" y="3050.002">결과</text><line style="stroke:#181818;stroke-width:1.0;" x1="1132" x2="1174" y1="3083.0547" y2="3083.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1174" x2="1174" y1="3083.0547" y2="3096.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1133" x2="1174" y1="3096.0547" y2="3096.0547"/><polygon fill="#181818" points="1143,3092.0547,1133,3096.0547,1143,3100.0547,1139,3096.0547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1139" y="3078.3125">(59)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="1171" y="3078.3125">VC 암호화</text><polygon fill="#181818" points="859.5,3104.0547,849.5,3108.0547,859.5,3112.0547,855.5,3108.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="853.5" x2="1126" y1="3108.0547" y2="3108.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="865.5" y="3121.623">(60)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="897.5" y="3121.623">결과(eVC)</text><polygon fill="#181818" points="649.5,3133.3652,639.5,3137.3652,649.5,3141.3652,645.5,3137.3652" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="643.5" x2="842.5" y1="3137.3652" y2="3137.3652"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="655.5" y="3150.9336">(61)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="687.5" y="3150.9336">결과(eVC)</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="3183.9863" y2="3183.9863"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="3183.9863" y2="3196.9863"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="3196.9863" y2="3196.9863"/><polygon fill="#181818" points="649.5,3192.9863,639.5,3196.9863,649.5,3200.9863,645.5,3196.9863" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="3179.2441">(62)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="677.5" y="3179.2441">VC 복호화(AES256)</text><polygon fill="#181818" points="1511,3222.2969,1521,3226.2969,1511,3230.2969,1515,3226.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="1517" y1="3226.2969" y2="3226.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="3221.5547">(63)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="677.5" y="3221.5547">Issuer DID Doc 조회</text><polygon fill="#181818" points="649.5,3234.2969,639.5,3238.2969,649.5,3242.2969,645.5,3238.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="643.5" x2="1527" y1="3238.2969" y2="3238.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="655.5" y="3251.8652">(64)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="687.5" y="3251.8652">결과</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="3303.2285" y2="3303.2285"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="3303.2285" y2="3316.2285"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="3316.2285" y2="3316.2285"/><polygon fill="#181818" points="649.5,3312.2285,639.5,3316.2285,649.5,3320.2285,645.5,3316.2285" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="3289.3311">(65)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="677.5" y="3280.1758">VC 검증(VC, DID Doc</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="29" x="802.5" y="3283.8086">issuer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="677.5" y="3298.4863">)</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="3345.5391" y2="3345.5391"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="3345.5391" y2="3358.5391"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="3358.5391" y2="3358.5391"/><polygon fill="#181818" points="649.5,3354.5391,639.5,3358.5391,649.5,3362.5391,645.5,3358.5391" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="3340.7969">(66)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="677.5" y="3340.7969">VC 암호화(AES256)</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="3387.8496" y2="3387.8496"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="3387.8496" y2="3400.8496"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="3400.8496" y2="3400.8496"/><polygon fill="#181818" points="649.5,3396.8496,639.5,3400.8496,649.5,3404.8496,645.5,3400.8496" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="3383.1074">(67)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="677.5" y="3383.1074">VC 저장</text><polygon fill="#181818" points="826.5,3426.1602,836.5,3430.1602,826.5,3434.1602,830.5,3430.1602" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="832.5" y1="3430.1602" y2="3430.1602"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="3425.418">(68)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="677.5" y="3425.418">VC 저장완료 알림</text><polygon fill="#181818" points="1110,3455.4707,1120,3459.4707,1110,3463.4707,1114,3459.4707" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="848.5" x2="1116" y1="3459.4707" y2="3459.4707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="855.5" y="3454.7285">(69)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="887.5" y="3454.7285">VC 저장완료 알림</text><polygon fill="#181818" points="859.5,3467.4707,849.5,3471.4707,859.5,3475.4707,855.5,3471.4707" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="853.5" x2="1126" y1="3471.4707" y2="3471.4707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="865.5" y="3485.0391">(70)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="897.5" y="3485.0391">결과</text><polygon fill="#181818" points="649.5,3496.7813,639.5,3500.7813,649.5,3504.7813,645.5,3500.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643.5" x2="842.5" y1="3500.7813" y2="3500.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="655.5" y="3514.3496">(71)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="687.5" y="3514.3496">결과</text><line style="stroke:#181818;stroke-width:1.0;" x1="638.5" x2="680.5" y1="3547.4023" y2="3547.4023"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="3547.4023" y2="3560.4023"/><line style="stroke:#181818;stroke-width:1.0;" x1="639.5" x2="680.5" y1="3560.4023" y2="3560.4023"/><polygon fill="#181818" points="649.5,3556.4023,639.5,3560.4023,649.5,3564.4023,645.5,3560.4023" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="645.5" y="3542.6602">(72)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="677.5" y="3542.6602">lock</text><polygon fill="#181818" points="327,3568.4023,317,3572.4023,327,3576.4023,323,3572.4023" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="321" x2="632.5" y1="3572.4023" y2="3572.4023"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="333" y="3585.9707">(73)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="365" y="3585.9707">결과</text><polygon fill="#181818" points="826.5,3615.0234,836.5,3619.0234,826.5,3623.0234,830.5,3619.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316" x2="832.5" y1="3619.0234" y2="3619.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="323" y="3614.2813">(74)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="355" y="3614.2813">VC 발급완료</text><polygon fill="#181818" points="327,3627.0234,317,3631.0234,327,3635.0234,323,3631.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="321" x2="842.5" y1="3631.0234" y2="3631.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="333" y="3644.5918">(75)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="365" y="3644.5918">발급완료응답</text><!--MD5=[93ee098438663c7b26488dc96fcb2791]
@startuml P200.sequence_diagram_issue_VC
skinparam ParticipantPadding 10
skinparam BoxPadding 10
skinparam MaxMessageSize 150
skinparam ResponseMessageBelowArrow true
autonumber "<b>(#)</b>"

'=== Title ===
title
	<size:25><color:red>VC 발급</color></size>
end title

'=== Panticipants ===
actor "사용자" as user
participant "목록관리서비스" as list <<목록 사업자>>

box #AliceBlue
participant "인가앱" as caApp <<인가앱 사업자>>
participant "인가앱 SDK" as caAppSdk <<인가앱 사업자>>
participant "mWallet SDK" as mWalletSdk <<월렛 사업자>>
end box

box
	participant "TAS" as tas <<TAS 사업자>>
	participant "SDK" as tokenServerSdk <<TAS 사업자>>
end box

box
	participant "Issuer" as issuer <<발급 사업자>>
	participant "Issuer SDK" as issuerSdk <<발급 사업자>>
end box

database "BlockChain" as bchain

'=== Constants ===


'=== Main ===
group 목록 사업자 기능
list <-> caApp: 발급 가능 모바일 신분증 조회
end

user-> caApp++: 모바일 신분증 발급 요청
note right user
	사용자 DID Doc 등록 이후에 VC 발급까지 하나의 과정으로 수행되면
	"purpose : DID Doc 등록 + VC 발급"
	으로 수행하며 아래 토큰발급 과정은 생략함
	(P130_user_regist 참고)
end note

caApp -> tas: VC 발급 개시 요청
tas++
tas->caApp: 결과
tas- -

group 보안세션 설립
    hnote over caApp, tas #DarkSeaGreen
        P150_security_session_zeroTrust
		(이 과정에서 인가앱과 TAS간 보안세션 설립)
     end hnote
end

== 토큰발급 ==
note right caApp
	서버토큰 발급 과정은 키교환을 통하여 생성한 대칭키를 이용.
end note

group 월렛토큰 발급 (DID Doc 등록 과정 수행이후면 발급과정 생략)	
hnote over caApp, mWalletSdk #DarkSeaGreen
    P140_3_issue_walletToken 참고 (purpose : VC발급)
end hnote
end	
group 서버토큰요청데이터 전달 (DID Doc 등록 과정 수행이후면 발급과정 생략)
	note over caApp, caApp #DarkSeaGreen
    	P140_1_make_serverTokenData 참고 (purpose : VC발급)
	end hnote
end
group 서버토큰 발급 (DID Doc 등록 과정 수행이후면 발급과정 생략)
	hnote over caApp, tas #DarkSeaGreen
    	P140_2_issue_serverToken 참고 (purpose : VC발급)
	end hnote
end

== DID Auth 단방향인증 ==
caApp -> tas++: VC 발급 시작 (token<sub>TAS</sub>, ID<sub>wallet</sub>)
rnote over tas: token<sub>TAS</sub> 검증
caApp <- tas- -: nonce<sub>TAS</sub> 전달

user -> caApp: 사용자인증

caApp -> mWalletSdk++: DID Auth data 생성 요청 (token<sub>wallet</sub>, nonce<sub>tas</sub>)
mWalletSdk -> mWalletSdk: DID Auth data(nonce<sub>TAS</sub>) 생성
mWalletSdk -> mWalletSdk: DID Auth data(nonce<sub>TAS</sub>) holder 서명
caApp <- mWalletSdk- -: DID Auth data(nonce<sub>TAS</sub>) 전달
caApp -> tas++: DID Auth 요청 (nonce<sub>TAS</sub>)
tas -> bchain++: Holder DIDDoc 조회
bchain - -> tas- -: 결과
tas -> tas: DID Auth 검증
tas -> caApp- -: DID Auth 검증 결과

== Profile 요청 및 검증 ==
caApp -> tas++: Issue Profile 생성 요청 (token<sub>TAS</sub>)
tas -> issuer++: Issue Profile 생성 요청 (개인정보)
issuer -> issuerSdk++: Issue Profile 생성 및 서명 요청
issuerSdk -> issuerSdk: Issue Profile 생성
issuerSdk -> issuerSdk: Issue Profile 서명
issuerSdk -> issuerSdk: Issuer 임시키쌍생성
issuerSdk -> issuer- -: Issue Profile 전달 (issuer 공개키정보)

issuer - -> tas- -: Issue Profile 전달 (issuer 공개키정보)
tas - -> caApp- -: Issue Profile 전달\n(issuer 공개키정보)

caApp -> caAppSdk++: Issuer Profile 검증요청
caAppSdk -> bchain++: Issuer DIDDoc 조회
bchain - -> caAppSdk- -: 결과
caAppSdk -> caAppSdk: Profile 검증
caAppSdk -> caApp- -: 검증결과

caApp <-> user: 사용자 화면에 정보 출력 및 확인

== VC 발급 요청 및 검증 ==

caApp -> mWalletSdk++: RequestVC 생성 및 서명 요청\n(token<sub>wallet</sub>, id<sub>ref</sub>, issue Profile)
rnote over mWalletSdk: token<sub>wallet</sub> 검증
mWalletSdk -> mWalletSdk: RequestVC 생성
mWalletSdk -> mWalletSdk: RequestVC 서명
mWalletSdk -> mWalletSdk: 임시키쌍생성
    note right mWalletSdk
		임시키쌍을 통한 비밀키생성.
	end note
mWalletSdk -> mWalletSdk: RequestVC 엄호화

mWalletSdk -> tas++: VC 발급 요청(RequestVC, id<sub>ref</sub>)

tas -> tas: id<sub>ref</sub> 검증
tas -> issuer++: VC 발급 요청(RequestVC)

issuer -> issuerSdk++: Request VC 검증 요청
    issuerSdk <-> issuerSdk: Request VC 복호화
	issuerSdk -> bchain++: Holder DID Doc 조회
	bchain - -> issuerSdk- -: 결과
	issuerSdk <-> issuerSdk: Request VC 검증
issuerSdk - -> issuer: 결과

issuer -> issuerSdk: VC 생성 요청
	issuerSdk -> issuerSdk: VC 생성
	issuerSdk -> issuerSdk: VC 서명
issuerSdk - -> issuer: 결과
issuer -> issuerSdk: VC 메타데이터 등록 요청
issuerSdk -> issuerSdk: 메타데이터 생성
issuerSdk -> issuer: vcMeta
issuer -> issuerSdk: VC 메타데이터 서명 요청
issuerSdk -> issuerSdk: 메타데이터 서명
issuerSdk -> issuer: signed_vcMeta
issuer -> issuerSdk: VC 매타데이터 등록 요청
issuerSdk <-> bchain: VC 메타데이터 등록
issuerSdk - -> issuer- -: 결과
issuer -> issuer: VC 암호화
issuer - -> tas- -: 결과(eVC)
tas - -> mWalletSdk- -: 결과(eVC)
mWalletSdk -> mWalletSdk: VC 복호화(AES256)

mWalletSdk -> bchain++: Issuer DID Doc 조회
bchain - -> mWalletSdk- -: 결과

mWalletSdk -> mWalletSdk: VC 검증(VC, DID Doc<sub>issuer</sub>)

mWalletSdk -> mWalletSdk: VC 암호화(AES256)
mWalletSdk -> mWalletSdk: VC 저장
mWalletSdk -> tas++: VC 저장완료 알림
tas -> issuer++: VC 저장완료 알림
issuer -> tas- -: 결과
tas -> mWalletSdk- -: 결과

mWalletSdk -> mWalletSdk: lock
mWalletSdk - -> caApp- -: 결과
caApp - -> tas++: VC 발급완료
tas - -> caApp- -: 발급완료응답

@enduml

@startuml P200.sequence_diagram_issue_VC
skinparam ParticipantPadding 10
skinparam BoxPadding 10
skinparam MaxMessageSize 150
skinparam ResponseMessageBelowArrow true
autonumber "<b>(#)</b>"

title
	<size:25><color:red>VC 발급</color></size>
end title

actor "사용자" as user
participant "목록관리서비스" as list <<목록 사업자>>

box #AliceBlue
participant "인가앱" as caApp <<인가앱 사업자>>
participant "인가앱 SDK" as caAppSdk <<인가앱 사업자>>
participant "mWallet SDK" as mWalletSdk <<월렛 사업자>>
end box

box
	participant "TAS" as tas <<TAS 사업자>>
	participant "SDK" as tokenServerSdk <<TAS 사업자>>
end box

box
	participant "Issuer" as issuer <<발급 사업자>>
	participant "Issuer SDK" as issuerSdk <<발급 사업자>>
end box

database "BlockChain" as bchain



group 목록 사업자 기능
list <-> caApp: 발급 가능 모바일 신분증 조회
end

user-> caApp++: 모바일 신분증 발급 요청
note right user
	사용자 DID Doc 등록 이후에 VC 발급까지 하나의 과정으로 수행되면
	"purpose : DID Doc 등록 + VC 발급"
	으로 수행하며 아래 토큰발급 과정은 생략함
	(P130_user_regist 참고)
end note

caApp -> tas: VC 발급 개시 요청
tas++
tas->caApp: 결과
tas- -

group 보안세션 설립
    hnote over caApp, tas #DarkSeaGreen
        P150_security_session_zeroTrust
		(이 과정에서 인가앱과 TAS간 보안세션 설립)
     end hnote
end

== 토큰발급 ==
note right caApp
	서버토큰 발급 과정은 키교환을 통하여 생성한 대칭키를 이용.
end note

group 월렛토큰 발급 (DID Doc 등록 과정 수행이후면 발급과정 생략)	
hnote over caApp, mWalletSdk #DarkSeaGreen
    P140_3_issue_walletToken 참고 (purpose : VC발급)
end hnote
end	
group 서버토큰요청데이터 전달 (DID Doc 등록 과정 수행이후면 발급과정 생략)
	note over caApp, caApp #DarkSeaGreen
    	P140_1_make_serverTokenData 참고 (purpose : VC발급)
	end hnote
end
group 서버토큰 발급 (DID Doc 등록 과정 수행이후면 발급과정 생략)
	hnote over caApp, tas #DarkSeaGreen
    	P140_2_issue_serverToken 참고 (purpose : VC발급)
	end hnote
end

== DID Auth 단방향인증 ==
caApp -> tas++: VC 발급 시작 (token<sub>TAS</sub>, ID<sub>wallet</sub>)
rnote over tas: token<sub>TAS</sub> 검증
caApp <- tas- -: nonce<sub>TAS</sub> 전달

user -> caApp: 사용자인증

caApp -> mWalletSdk++: DID Auth data 생성 요청 (token<sub>wallet</sub>, nonce<sub>tas</sub>)
mWalletSdk -> mWalletSdk: DID Auth data(nonce<sub>TAS</sub>) 생성
mWalletSdk -> mWalletSdk: DID Auth data(nonce<sub>TAS</sub>) holder 서명
caApp <- mWalletSdk- -: DID Auth data(nonce<sub>TAS</sub>) 전달
caApp -> tas++: DID Auth 요청 (nonce<sub>TAS</sub>)
tas -> bchain++: Holder DIDDoc 조회
bchain - -> tas- -: 결과
tas -> tas: DID Auth 검증
tas -> caApp- -: DID Auth 검증 결과

== Profile 요청 및 검증 ==
caApp -> tas++: Issue Profile 생성 요청 (token<sub>TAS</sub>)
tas -> issuer++: Issue Profile 생성 요청 (개인정보)
issuer -> issuerSdk++: Issue Profile 생성 및 서명 요청
issuerSdk -> issuerSdk: Issue Profile 생성
issuerSdk -> issuerSdk: Issue Profile 서명
issuerSdk -> issuerSdk: Issuer 임시키쌍생성
issuerSdk -> issuer- -: Issue Profile 전달 (issuer 공개키정보)

issuer - -> tas- -: Issue Profile 전달 (issuer 공개키정보)
tas - -> caApp- -: Issue Profile 전달\n(issuer 공개키정보)

caApp -> caAppSdk++: Issuer Profile 검증요청
caAppSdk -> bchain++: Issuer DIDDoc 조회
bchain - -> caAppSdk- -: 결과
caAppSdk -> caAppSdk: Profile 검증
caAppSdk -> caApp- -: 검증결과

caApp <-> user: 사용자 화면에 정보 출력 및 확인

== VC 발급 요청 및 검증 ==

caApp -> mWalletSdk++: RequestVC 생성 및 서명 요청\n(token<sub>wallet</sub>, id<sub>ref</sub>, issue Profile)
rnote over mWalletSdk: token<sub>wallet</sub> 검증
mWalletSdk -> mWalletSdk: RequestVC 생성
mWalletSdk -> mWalletSdk: RequestVC 서명
mWalletSdk -> mWalletSdk: 임시키쌍생성
    note right mWalletSdk
		임시키쌍을 통한 비밀키생성.
	end note
mWalletSdk -> mWalletSdk: RequestVC 엄호화

mWalletSdk -> tas++: VC 발급 요청(RequestVC, id<sub>ref</sub>)

tas -> tas: id<sub>ref</sub> 검증
tas -> issuer++: VC 발급 요청(RequestVC)

issuer -> issuerSdk++: Request VC 검증 요청
    issuerSdk <-> issuerSdk: Request VC 복호화
	issuerSdk -> bchain++: Holder DID Doc 조회
	bchain - -> issuerSdk- -: 결과
	issuerSdk <-> issuerSdk: Request VC 검증
issuerSdk - -> issuer: 결과

issuer -> issuerSdk: VC 생성 요청
	issuerSdk -> issuerSdk: VC 생성
	issuerSdk -> issuerSdk: VC 서명
issuerSdk - -> issuer: 결과
issuer -> issuerSdk: VC 메타데이터 등록 요청
issuerSdk -> issuerSdk: 메타데이터 생성
issuerSdk -> issuer: vcMeta
issuer -> issuerSdk: VC 메타데이터 서명 요청
issuerSdk -> issuerSdk: 메타데이터 서명
issuerSdk -> issuer: signed_vcMeta
issuer -> issuerSdk: VC 매타데이터 등록 요청
issuerSdk <-> bchain: VC 메타데이터 등록
issuerSdk - -> issuer- -: 결과
issuer -> issuer: VC 암호화
issuer - -> tas- -: 결과(eVC)
tas - -> mWalletSdk- -: 결과(eVC)
mWalletSdk -> mWalletSdk: VC 복호화(AES256)

mWalletSdk -> bchain++: Issuer DID Doc 조회
bchain - -> mWalletSdk- -: 결과

mWalletSdk -> mWalletSdk: VC 검증(VC, DID Doc<sub>issuer</sub>)

mWalletSdk -> mWalletSdk: VC 암호화(AES256)
mWalletSdk -> mWalletSdk: VC 저장
mWalletSdk -> tas++: VC 저장완료 알림
tas -> issuer++: VC 저장완료 알림
issuer -> tas- -: 결과
tas -> mWalletSdk- -: 결과

mWalletSdk -> mWalletSdk: lock
mWalletSdk - -> caApp- -: 결과
caApp - -> tas++: VC 발급완료
tas - -> caApp- -: 발급완료응답

@enduml

PlantUML version 1.2022.7(Tue Aug 23 02:01:30 KST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ko
Country: KR
--></g></svg>